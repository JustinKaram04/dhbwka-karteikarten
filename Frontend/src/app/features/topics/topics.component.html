<div class="themengebiete" (click)="closeMenu()">
  <app-header></app-header>

  <main class="topics">
    <h2>Themenbereiche:</h2>

    <div class="search-filter-container">
      <!-- Such- & Filterbereich wie gehabt -->
    </div>

    <div class="topic-container">
      <app-add-item
        [labelName]="'Themengebiet'"
        [placeholderName]="'Name eingeben‚Ä¶'"
        [labelDescription]="'Beschreibung'"
        [placeholderDescription]="'Beschreibung eingeben‚Ä¶'"
        [buttonText]="'Hinzuf√ºgen'"
        [cancelText]="'Abbrechen'"
        (add)="addTopicHandler($event)"
      ></app-add-item>

      <!-- Nur rendern, wenn Topics geladen -->
      <ng-container *ngIf="filteredTopics$ | async as topics">
        <ng-container
          *ngFor="let topic of topics | searchSort: searchQuery : sortCriteria : ['name','id']"
        >
          <app-editable-card
            class="topic-card"
            [editing]="editingTopicId === topic.id"
            [showMenu]="activeMenuId === topic.id"
            (toggleMenu)="toggleMenu(topic.id, $event)"
            (cardClick)="navigateToTopic(topic.id, $event)"
          >
            <span
              progressDot
              class="progress-dot"
              [ngClass]="{
                'dot-red': topic.progress === 'low',
                'dot-yellow': topic.progress === 'medium',
                'dot-green': topic.progress === 'high'
              }"
            ></span>

            <div cardView>
              <h2>{{ topic.name }}</h2>
              <p>{{ topic.description }}</p>
            </div>

            <div cardEdit>
              <input
                [(ngModel)]="editedTopicName"
                placeholder="Neuer Name‚Ä¶"
              />
              <textarea
                [(ngModel)]="editedTopicDescription"
                placeholder="Neue Beschreibung‚Ä¶"
              ></textarea>
              <div class="button-group">
                <button (click)="saveTopic()">üíæ Speichern</button>
                <button class="cancel-btn" (click)="cancelEditing()">‚ùå Abbrechen</button>
              </div>
            </div>

            <div cardMenu class="menu" (click)="$event.stopPropagation()">
              <button (click)="startEditing(topic, $event)">Bearbeiten</button>
              <button (click)="deleteTopic(topic.id, $event)">L√∂schen</button>
            </div>
          </app-editable-card>
        </ng-container>
      </ng-container>
    </div>
  </main>
</div>